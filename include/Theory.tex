% CREATED BY DAVID FRISK, 2015
\chapter{Theory}

In the following sections, examples of a figure, an equation, a table, a chemical structure, a list, a listing and a to-do note are shown.

\section{Structural theory of masonry structures}

Masonry is a composition or assemblage of building elements. The most common types of these elements are stones and bricks. It can though be in any shape it can be done with or without mortar but the structural action is similar. According to Heyman it is wise to and convenient to regard a masonry building as a collection of dry stones or bricks that are placed on one another to to form a stable structure. The mortar cannot be accounted since it may have reduced its structural influence with time - it cannot be assumed to add strength to the construction. The stability of the structure relies on the compaction under the gravity of its components. "A general state of compressive stress exists, but only feeble tensions can be resisted."\\

\subsection{Structural design}
Speaking in terms of general design there are three main structural criterion's, those of \textit{strength, stiffness and stability}. The first implies that the material should resist the internal stresses and the second ensures not to high deflections. These criterion's are not the crucial regarding masonry structures, it is the stability that is of most concern.\\

Heyman uses an masonry arch to illustrate this. The load applied on the load is it self-weight and an external point load. The stresses are low and the deflection negligible until a certain magnitude of the point load is reached and it collapses. The stresses are still low in the structure but the internal forces cannot be held inside the geometry of the arch. This leads to the formation of four frictionless hinges that turns the structure into a collapse mechanism.\\   

\begin{figure}[H] 
\centering
\includegraphics[width=0.5\linewidth ]{figure/Theory/heyman3.pdf}
\caption{Collapse mechanism of masonry vault by an asymmetric load}
\label{fig:arch2}
\end{figure}

Heyman imposes a method of based on plastic analysis for the structural design of masonry rather than the elastic analysis. One reason is that an elastic solution might not be possible, an arch consisting of rigid blocks will not deform themselves and will therefore not obey the rules of elastic analysis. Another reason is that there are uncertainties regarding the structure and how the boundary conditions change during time. Therefore an elastic analysis might change dramatically with time. The so-called plastic designer knows that the there are infinite ways to achieve equilibrium and that the solution he has found is just one of them. The plastic designer takes this into account and applies the theorems of plasticity to ensure that the structure will not fail. \\


\begin{enumerate}
\item \textit{The lower bound, or safe theorem}
\item \textit{The upper bound, or unsafe theorem}
\item \textit{The uniqueness theorem}
\end{enumerate}

This will be described more in detail later. Important to understand that the hinges formed are natural behaviour of the masonry structures, in a similar way as the reinforced concrete is suppose to crack otherwise the reinforcement is unnecessary. So the designer should be aware of the of this phenomena. A sufficient hinges, or cracks, are fine but for instance the arch will collapse when four of these have formed. This can of course easily be very complicated to read in more complex structures where many different elements interact.

\begin{figure}[H] 
\centering
\includegraphics[width=0.5\linewidth ]{figure/Theory/cracksHeyman.pdf}
\caption{Collapse mechanism of masonry vault by an asymmetric load}
\end{figure}

\subsection{Limit Design Principles}

The limit design principles Heyman purposes for masonry is similar to the ones used is similar to the plastic hinge theory used for plastic design of steel frames. This implies that hinges formed causes the structure to become a mechanism. To be able to apply the same theory and theorems for masonry structures Heyman makes three assumptions for the properties of the material:\\



\textit{"(i) Stone has no tensile strength. This assumption is almost exactly true if a structure,
like an arch, is under consideration, made up of voussoirs laid either dry or with very
weak mortar. Although the stone itself may in fact have some tensile strength, the joints
will not, and no tensile forces can be transmitted from one portion of the structure to
another. The assumption of no tensile strength is, in accordance both with common sense
and with the corollaries of the general principles established below, a safe assumption.
It may be slightly too safe if the stone structure is not of the voussoir type, and if tensile
forces can be transmitted by the interlocking of perhaps randomly oriented stones.}

\textit{(ii) The general stress levels are so low that, for the purposes of calculation, the compressive
strength of stone is effectively infinite. This is a slightly unsafe assumption, and
will be discussed more fully later.}

\textit{(iii) Sliding of one stone upon another cannot occur. This seems a reasonable assumption
(it did to Coulomb, as noted above). It implies that wherever there is a weak plane, for
example between voussoirs, the line of thrust should not depart too far from normality
to that plane. (The collapse of Beauvais may have been initiated by sliding.)" }Stone Skeleton 660

The hinges are formed when, as shown in figure \ref{fig:arch2}, when the line of thrust cannot contain itself inside the geometry. A thrust that follows the centre line of the structure results in pure axial forces, and when moving outside it results in a minor moment that until a certain point that will be negligible due to the compression of the self weight.

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/Plasticity.pdf}
\caption{Limit condition for masonry voussoirs}
\end{figure}

This represents a block of infinite stress capacity since a normal stone or brick would crush when the contact area gets to small. Therefore there are some safety factors that need to be applied.


\subsubsection{Safety factor}

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/Safety.pdf}
\caption{This shows the middle third rule applied to a block. redrawn from Block...}
\end{figure}


\subsection{Plasticty theorems}
\subsubsection{Lower Bound Theory}


If a distribution of moments can be found which satisfies the above equilibrium and yield conditions the structure is either safe or just on the point of collapse.
\subsubsection{Upper Bound Theory}


If a loading is found which causes a collapse mechanism to form then the loading must be equal to or greater than the actual collapse load.

Generally, in plastic analysis, the upper bound theorem is used. Possible collapse mechanisms are formulated and the corresponding collapse loads calculated. From the upper bound theorem we know that all mechanisms must give a value of collapse load which is greater than or equal to the true collapse load so that the critical mechanism is the one giving the lowest load. It is possible that a mechanism, which would give a lower value of collapse load, has been missed. A check must therefore be carried out by applying the lower bound theorem.


\subsubsection{The uniqueness theorem}
"The uniqueness theorem may be stated for masonry as follows: If a line of thrust can be found which represents an equilibrium state for the structure under the action of the given external loads, which lies wholly within the masonry, and which allows the formation of sufficient hinges to transform the structure into a mechanism, then the structure is on the point of collapse; further, if the loads can all be specified as ratios of one of their number (proportional loading), and the loads have been notionally increased from their working values to the collapse values by a load factor, then the value of that load factor at collapse is unique. "


\section{Tensor Analysis}

Britannia
"Tensor analysis, branch of mathematics concerned with relations or laws that remain valid regardless of the system of coordinates used to specify the quantities. Such relations are called covariant. Tensors were invented as an extension of vectors to formalize the manipulation of geometric entities arising in the study of mathematical manifolds."

\subsection{Index notation}
The index notation simplifies writing quantities as well as equations. In the index notation there are two types of indices, \textit{free indices} and \textit{summation indices}.\\

\textit{Free indices} are those who are used only once per quantity. If you have a Cartesian coordinate system the integer will take values 1,2 and 3. It is possible to use several free indices.

\begin{align*} 
    a_\alpha  &\Leftrightarrow a_1 , a_2, a_3 \\ 
   a_{\alpha \beta}  &\Leftrightarrow a_{11},a_{12},a_{13},a_{21},a_{22},a_{23},a_{31},a_{32},a_{33}
\end{align*}

\textit{Summation indices} are used twice per quantity and indicates a  summation of that index. Using Cartesian coordinates it will range from 1 to 3.
\begin{align*} 
    a_{\alpha \alpha}  &\Leftrightarrow \sum\limits_{\alpha=1}^3  a_{\alpha \alpha} \\ 
   a_{\alpha}b_\alpha  &\Leftrightarrow \sum\limits_{\alpha=1}^3  a_{\alpha}b_\alpha 
\end{align*}

\subsection{2nd order Tensors}
2nd order tensors are physical quantites that describe how vectors change with e.g direction and position in space. A 2nd order tensor \textbf{T} is represented in a orthonomal coordinate system $\{\hat{\textbf{e}_1},\hat{\textbf{e}_2} , \hat{\textbf{e}_3}\}$ as

\begin{equation}
\textbf{T} = T_{\alpha\beta}\hat{\textbf{e}_\alpha},\hat{\textbf{e}_\beta}
\end{equation}


%\section{Geometry}
\section{Differential Geometry}

Differential geometry is a mathematical discipline that uses the techniques of differential calculus, integral calculus, linear algebra and multilinear algebra to study problems in geometry. The theory of plane and space curves and surfaces in the three-dimensional Euclidean space formed the basis for development of differential geometry during the 18th century and the 19th century. (Wikipedia)

Something that is dependent on Smooth geometry and functions. That is because it is called Differential geometry... etec etec 


\newcommand{\upperRomannumeral}[1]{\uppercase\expandafter{\romannumeral#1}}
\newcommand{\lowerromannumeral}[1]{\romannumeral#1\relax}



\subsection{Curves In Space}
There are many examples of Curves and most of you have used various of them. Common examples might be a line, a parabola or a circle. 


\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/CurveExample.pdf}  \caption{Example of Curves, Presley }
\end{figure}

Using this notation means that you describe them in a Cartesian equation $f(x,y) = c$
Where $f$ is a function of $x$ and $y$ and $c$ is a constant.From this point of view we see a curve as a set of points namely

$$ \mathcal{C}\quad =\quad \left\{ (x,y) \in \mathbb{R}^2\quad |\quad f(x,y) = c \right\} $$


It is sometimes more efficient to describe curves in another way, as a parametrized curve. Where the curve is described by a vector \textbf{c} of a scalar parameter $t$ (in $\mathbb{R}^2$ for a plane curve, in $\mathbb{R}^3$ for a curve in space). 



\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth ]{figure/Theory/CurveInSpace.pdf}              
\caption{The geometry of the curve, from Presley }
\end{figure}

Stoker describes a \textit{regular} as the locus defined by a vector

\begin{equation}
\textbf{c}(t) = x(t)\textbf{e}_1 +  y(t)\textbf{e}_2+  z(t)\textbf{e}_3,\quad  \alpha \leq t \leq \beta
\end{equation}
 such that the functions  $x(t), y(t), z(t)$ have continuous second or third derivatives,in the interval of $\alpha$ and $\beta$, and such that the derivative of $\textbf{c}(t)$ with respect to $t$ is not zero.
 
 \begin{equation}
 \frac{\textbf{c}(t)}{dt} = \textbf{c}'(t)= (x'(t),y'(t),z'(t)) \neq 0
 \end{equation}

The locus means that a set of points are related and governed of a set of equations or rules, in this case the rules of the curve. The latter statement ensures that the mapping of $t$ into the space of $(x,y,z)$ is one-to-one. When we speak of curves later on we impose that they are regular curves.

\vspace{5mm} %5mm vertical space

To give an example when this is useful we can take the circle which can be described as $x^2+y^2=1$. A common choice to parametrize is to choose $x = cos(t)$ and $y = sin(t)$ which clearly holds the initial statement $cos(t)^2 + sin(t)^2 = 1$.  

Written in parametric form $\gamma(t) = (cos(t),sin(t))$. A useful property of this parametrization is that we can differentiate this expression infinitely many times. This is very useful when computing the properties of the curve, which will be obvious in the next section \ref{curvature}.

\subsubsection{Geometry of the space curve} \label{GeoSpaceCurve}

If we have a curve $c(t)$, where the parameter $t$ is not necessarily an unit speed parametrization. It is possible to express the curve in what is called a arch length parametrization. The arch length of the curve of the curve is defined by the integral
\begin{equation}
s(t) = \int_{t_0}^{t_1} \sqrt{\frac{d\textbf{c}}{dt} \cdot \frac{d\textbf{c}}{dt}}dt
\end{equation}

With a arch length parametrization we ensure that the tangent of the curve is a unit speed vector, which can be quite convenient.
Evaluating a curve in a point, in that point the curve we define a tangent,$\textbf{t}$, a principal norm, $\textbf{n}$, and a binormal vector,$\textbf{b}$, of the curve. The tangent and principal normal vector lies in what is called the osculating plane.

\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth ]{figure/Theory/CurveGeometry.pdf}              
\caption{The geometry of the curve, from Presley }
\end{figure}

If we have a unit speed curve with $s$ as arch length parameter we have the tangent defined as 
\begin{equation}
\textbf{t} =  \frac{d\textbf{c}}{ds} ,\quad \textbf{t} \cdot \textbf{t} = 1
\end{equation}

The $d\textbf{c}/dt$ is also a tangent but not necessarily unit vector. The principal vector is defined as following if we still assume $s$ as our arch length parameter.

\begin{equation}
\textbf{n} = \frac{1}{\kappa}\frac{d\textbf{t}}{ds} 
\end{equation}

Where $\kappa$ is the curvature in that specific point of the curve. It is easy to get the binormal vector \textbf{b} due to the following relations between the vectors.

\begin{equation}
\textbf{b} = \textbf{t} \times \textbf{n} ,\quad \textbf{n} = \textbf{b} \times \textbf{t} ,\quad \textbf{t} = \textbf{n} \times \textbf{b} 
\end{equation}

\subsubsection{Curvature and Torsion} \label{curvature}

\textit{Curvature} can be seen as a measure of how much a curve deviates from a straight line,Bär, or as Struik defines it as a measure of the rate of change of the tangent moving along the curve. \textit{Torsion} is a measure of the rate of change of the osculating plane, according to Struik.

\vspace{5mm} %5mm vertical space

Definition of curvature, $\kappa$, for regular curves can be described, for a parameter t is a following. 
\begin{equation}
\kappa = \frac{|| d^2\textbf{c}/ dt^2 \times d\textbf{c}/dt ||}{||d\textbf{c}/dt||^3} 
\end{equation}

For arch length parameter curves it is a bit more convenient and can be defined as $\kappa = ||d^2 \textbf{c}/ ds^2||$

A similar definition can be made for torsion,$\tau$, as for the curvature for a regular curve with an arbitrary parameter t. 
\begin{equation}
\tau = \frac{ d^3\textbf{c}/ dt^3 \cdot(d\textbf{c}/dt \times d^2\textbf{c}/dt^2)}{||d\textbf{c}/dt \times d^2\textbf{c}/dt^2||^2} 
\end{equation}

It is possible to read the applied properties of the curve in vector form using the \textit{Frenet - Serret equations}, which implies.


\begin{align}
&d\textbf{t}/ds = \kappa \textbf{n} \\
&d\textbf{n}/ds = - \kappa \textbf{t} + \tau \textbf{b}\\
&d\textbf{b}/ds = \tau \textbf{n}
\end{align}



\subsection{Surfaces}

The word surface is something that most engineers can relate to, even though nothing that necessarily feels comfortable.  Surfaces in three-dimensional space are two dimensional objects, meaning that we can describe them in a two dimensional domain using two parameters, it can be $u,v$ or $\theta^1,\theta^2$. They range from quite simple, as the plane, to very complex such as fractals. In mathematics it is quite uncommon to handle surfaces that are able to parametrize as whole, like the sphere or a cylinder. More common is that only a part, or patch is parametrized.  (Stoke)

\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth]{figure/Theory/surfaces.pdf}
 
\caption{Examples of surfaces  }
\end{figure}


A proper mathematical definition of a regular surfaces can be read in most books of concerning differential geometry. One of the most comprehensible to understand that not uses to concepts and words only concerning a mathematician can be read in Stoke.

A \textit{regular surface} is defined as following.

 \renewcommand{\labelenumii}{\Roman{enumii}}
 \begin{enumerate}
 \item A surface is a locus of points in the Euclidean three-space defined by the end points of a vector $\textbf{r} = \textbf{r}(\theta^1 ,\theta^2)$, depending on two real parameters $\theta^1$ and $\theta^2$.
 \begin{equation}
 \textbf{r}(\theta^1,\theta^2) = x_1(\theta^1,\theta^2)\textbf{e}_1 +  x_2(\theta^1,\theta^2)\textbf{e}_2+  x_3(\theta^1,\theta^2)\textbf{e}_3
 \end{equation}
 with $x_i(\theta^1,\theta^2)$ the components of the vector. These real functions are assumed to be defined oven an open connected domain of a Cartesian $\theta^1, \theta^2$ - plane and to have continuous fourth partial derivatives there.
 \item The vectors $\textbf{r},_\alpha = \partial\textbf{r}/\partial \theta^\alpha $, to be called coordinate vectors, or covariant base vectors, are assumed to be linearly independent:
 \begin{equation}
 \frac{\partial\textbf{r}}{\partial \theta^1} \times  \frac{\partial\textbf{r}}{\partial \theta^2} \neq 0
 \end{equation}
 This can also be formulated in terms of the matrix
 

\[M =
\begin{bmatrix}
    \partial x_1/ \partial\theta^1 & \partial x_2/ \partial\theta^1 & \partial x_3/ \partial\theta^1\\
    \\
    \partial x_1/ \partial\theta^2 & \partial x_2/ \partial\theta^2 & \partial x_3/ \partial\theta^2
\end{bmatrix} , rank \quad M = 2
\]
 
 \end{enumerate}




\begin{figure}[H]
\centering
\includegraphics[width=1.0\linewidth]{figure/Theory/SurfDefinition.pdf}
 
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}







The most common surface is probably sphere which can be described in Cartesian coordinates as $ x^2 + y^2 + z^2 = R^2$ , where $R$ is the radius of the Sphere.

\begin{figure}[H]
\centering
\includegraphics[width=0.4\linewidth ]{figure/Theory/sphereEx.pdf}                \caption{The tangent differs depending of which direction you refer to. }
\end{figure}

A general surface described in vector form as:
\begin{equation}
\textbf{r}(\theta^1,\theta^2) = x_1(\theta^1,\theta^2)\textbf{e}_1 +  x_2(\theta^1,\theta^2)\textbf{e}_2+  x_3(\theta^1,\theta^2)\textbf{e}_3
\end{equation}

Where \textbf{i},\textbf{j} and \textbf{k} are base vectors and where $\theta^1$ and $\theta^2$ are the surface coordinates.



Writing the above example in this form would be:
\begin{equation}
x_1 = R cos(\theta^1) sin (\theta^2),\quad
x_2 = R  sin(\theta^1) cos (\theta^2),\quad
x_3 = R sin(\theta^2)
\end{equation}

\subsubsection{Geometry on a Surface}

On the surface a coordinate system of curves

To orientate and describe geometry on the surface we can use two pair of base vectors....

The covaraiant base vectors of the surface are:
\begin{equation} \label{convariantDiff}
 \textbf{a}_\alpha = \frac{\partial\textbf{r}}{\partial \theta^\alpha } = \frac{\partial x}{\partial \theta^\alpha }\textbf{e}_1 + \frac{\partial y}{\partial \theta^\alpha }\textbf{e}_2+\frac{\partial z}{\partial \theta^\alpha }\textbf{e}_3 = \textbf{r},_{\alpha} , for\quad \alpha = 1,2
\end{equation}


The covariant base vectors are rarily orthogonal to each other.

The contravaiant base vectors also lies in the plane of the surface and are defined by

\begin{align}
\textbf{a}_{\alpha} \cdot \textbf{a}^\beta = \delta^{\beta}_\alpha \\
\textbf{a}_{\alpha} \cdot \textbf{a}^3 = 0    
\end{align}

Where $\delta^{\beta}_\alpha$ is called a \textit{Kronecker delta} and has the properties $\delta^{\beta}_\alpha = 0$ if $\alpha \neq  \beta$ and $\delta^{\beta}_\alpha = 1$ if $\alpha =  \beta$. 
 
\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth ]{figure/Theory/surfGeometry2.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}
 
The components of the metric tensors can be defined as

\begin{align} \label{metricComp}
a_{\alpha \beta} = \textbf{a}_\alpha \cdot \textbf{a}_\beta \\
a^{\alpha \beta} = \textbf{a}^\alpha \cdot \textbf{a}^\beta 
\end{align}

The quantity $a$ can be seen as the determinant of the covaraiant metric tensor.

\begin{equation}
a = a_{11} a_{22} + a_{12}^2
\end{equation}



The use of the two sets of base vectors can be shown be illustrated by this example, Willams. By specifying an vector $\textbf{p}$ it can be written in both contravariant and covariant base vectors.

\begin{equation}
    \textbf{p} = p_x \textbf{i} +p_y \textbf{j} +p_z \textbf{k}  
\end{equation}
\begin{equation}
    \textbf{p} = p^\alpha \textbf{a}_\alpha + p \textbf{a}^3 =   p^1 \textbf{a}_1 +  p^2 \textbf{a}_2 + p \textbf{a}^3 
\end{equation}
\begin{equation}
    \textbf{p} = p_\alpha \textbf{a}^\alpha + p \textbf{a}^3=  p_1 \textbf{a}^1 +  p_2 \textbf{a}^2 + p \textbf{a}^3   
\end{equation}


\begin{figure}[H]
\centering
\includegraphics[width=0.8\linewidth ]{figure/Theory/Covariant.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}




\subsubsection{First fundamental Form}

The First Fundamental is the measure of the length of a surface. This is an intrinsic property since the length always is the same for real surfaces. It can tell us how the measures will be behave on the surface. For example a plane and a cylinder has the same first fundamental form which means that  a line drawn on a paper has the same length as the curve on the folded cylinder by the same paper.

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/FirstFundamental.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

The plane and the sphere for example does not have the same first fundamental form which is why we can not form a paper directly to a sphere without modifications. Therefore a curve drawn on the sphere would not have a true relation to the plane as the cylinder and the plane has.

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/unrollSurfMod.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}


If we were to measure the line length from P and Q which is say $\delta s$. Then 

\begin{equation}
\delta s^2 = \delta \textbf{r} \cdot \delta \textbf{r} =  \textbf{a}_\alpha \cdot \textbf{a}_\beta \delta\theta^\alpha \delta\theta^\beta =  \textbf{a}_{\alpha\beta} \delta\theta^\alpha \delta\theta^\beta 
\end{equation}

The components of the covariant metric tensor $a_{\alpha \beta}$ described in \ref{metricComp} are also what is called the coefficients of the \textit{first fundamental form}.
It is common that these are described differently in math literature such as Struik which uses the following notation:
$$ E= a_{11} ,\quad  F = a_{12},\quad
 G = a_{22}$$

The curve distance P and Q can be described as following for a curve $ \textit{C}(t) = \textbf{r}(\theta^1(t),\theta^2(t))$:

$$s = \int { \sqrt { a_{11} \Big(\frac{d\theta^1 }{dt}\Big)^2+2a_{12}\Big(\frac{d\theta^1 }{dt}\Big)\Big(\frac{d\theta^2 }{dt}\Big)  +a_{22} \Big(\frac{d\theta^2 }{dt}\Big)^2 }  } dt$$



\subsubsection{Second fundamental Form}

The second fundamental form is the measure of the deviation from a tangent plane, Stokes.

\begin{figure}[H]
\centering
\includegraphics[width = 0.7\linewidth ]{figure/Theory/SecondFFil.pdf}
\caption{http://web.mit.edu/hyperbook/Patrikalakis-Maekawa-Cho/node29.html}
\end{figure}

Suppose we have points P and Q on the surface that are described as $r(\theta^1, \theta^2)$ and $r(\theta^1 + d\theta^1, \theta^2 + d\theta^2)$.

A taylor expansion of $r(\theta^1 + d\theta^1, \theta^2 + d\theta^2)$.

$$
\textbf{r}(\theta^1 + d\theta^1, \theta^2 + d\theta^2)= \textbf{r}(\theta^1, \theta^2) + \textbf{r}_{,1} d\theta^1 + \textbf{r}_{,2} d\theta^2 + \frac{1}{2}(\textbf{r}_{,11}(d\theta^1)^2 + 2\textbf{r}_{,12}d\theta^1 d\theta^2 + \textbf{r}_{,11}(d\theta^2)^2) + remainder
$$

Therefore \textbf{PQ} can be described as
$$
\textbf{PQ} = r(\theta^1 + d\theta^1, \theta^2 + d\theta^2) - r(\theta^1, \theta^2) =  \textbf{r}_{,1} d\theta^1 + \textbf{r}_{,2} d\theta^2 + \frac{1}{2}(\textbf{r}_{,11}(d\theta^1)^2 + 2\textbf{r}_{,12}d\theta^1 d\theta^2 + \textbf{r}_{,11}(d\theta^2)^2) 
$$

Projecting PQ onto $\textbf{a}^3$ 
$$
d = \textbf{PQ}\cdot\textbf{a}^3 = \frac{1}{2}(\textbf{r}_{,11}(d\theta^1)^2 + 2\textbf{r}_{,12}d\theta^1 d\theta^2 + \textbf{r}_{,11}(d\theta^2)^2) \cdot \textbf{a}^3 
$$

This is due to $(\textbf{r}_{,1} d\theta^1 + \textbf{r}_{,2}d\theta^2)\cdot\textbf{a}^3 = 0$

Recall from equation \ref{convariantDiff} that $\textbf{r}_\alpha = \textbf{a}_\alpha$ And that $a_{\alpha\beta}$ are the coefficents of the first fundamental form. In similar fashion we define the coefficents of the Second fundamental form $b_{\alpha\beta}$ 

\begin{equation}
b_{\alpha\beta} = \textbf{a}_3 \cdot \textbf{a}_{\alpha,\beta} 
\end{equation}

Applying this the second fundamental form can be written as:

$$ ~\upperRomannumeral{2} = b_{11}(d\theta^1)^2 + 2b_{12}d\theta^1 d\theta^2 + b_{22}(d\theta^2)^2 = -d\textbf{r}\cdot d\textbf{a}_3$$

Reading literature by Presley, Stokes and Struik they have another definition, but it can be related like this.
$$ e = L = b_{11} ,\quad  f= M = b_{12},\quad
 g = M = b_{22}$$


It is appropriate to distinguish four different cases depending on the determinant

\begin{enumerate}
\item \textit{Elliptic case}, $ b_{11}b_{22}-b_{12}^2  > 0$ \\
The indicatrix is an ellipse.
\item \textit{Hyperbolic case}, $b_{11}b_{22}-b_{12}^2 < 0$ \\
The indicatrix consists of a pair of conjugate hyoerbolas.
\item \textit{Parabolic case}, $b_{11}b_{22}-b_{12}^2 = 0, b_{11}^2 + b_{12}^2 + b_{22}^2 \neq 0 $ \\
Text text text.....
\item \textit{Planar case}, $b_{12} = b_{11} = b_{22} = 0$ \\
Text text text.....
\end{enumerate}



\begin{figure}[H]
\centering
\includegraphics[width = 1\linewidth ]{figure/Theory/SecondFF2.JPG}
\caption{http://web.mit.edu/hyperbook/Patrikalakis-Maekawa-Cho/node29.html}
\end{figure}

\subsubsection{Christoffel Symbols}

As described previously the cordinate base vectors are dependent on the curvelinear coordinate lines, and importantly the lines do change with the surface. Therefore that means that the coordinate base vectors does change, which is a big difference to a Cartesian coordinate system where the base vectors are the same. Therefore Christoffel Symbols are defined and used to measure the rate of change from a point P to a point Q in the base vectors of P.
In the book  \textit{Einstein's Theory: A Rigorous Introduction for the Mathematically Untrained}, you can read this description \textit{ "The Christoffel symbol $\Gamma^\gamma_{\alpha \beta}$, is the $\gamma$ component of the change of the coordinatebasis vector $ \textbf{a}_\beta $ by an infinitesimal coordinate displacement $ d\theta^\alpha $, per unit coordinate
distance."} \cite{ref:Einstein}

With this definition:

\begin{equation}
\Gamma^\gamma_{\alpha \beta} = \frac{\partial\textbf{a}_\beta}{\partial\theta^\alpha}\cdot \textbf{a}^\gamma
\end{equation}


According to Williams the Christoffel symbols do not represent anything real.  
"They give the properties of the coordinate system as lengths and directions change along the coordinate curves. They do not represent anything real, are NOT the components of a tensor and do not obey the tensor component rule under a change of coordinates." Chris Willams

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/christoffelSecondKind.pdf}
\caption{ Geometric representation of Christoffel Symbol of Second kind }
\end{figure}

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/christoffelFirstKind.pdf}
\caption{Geometric representation of Christoffel Symbol of First kind }
\end{figure}

In 3d:

\begin{equation}
 \frac{\partial\textbf{g}_i}{\partial\theta^j} = \Gamma^k_{i j} \textbf{g}_k 
\end{equation}

For a surface:

\begin{equation}
    \frac{\partial\textbf{a}_\beta}{\partial\theta^\alpha} = \Gamma^\lambda_{\alpha \beta} \textbf{a}_\lambda + b_{\alpha \beta}\textbf{a}_3
\end{equation}



\subsubsection{Gauss-Codazzi Equations}

Chris Williams states in Use of structural analogy
generation of smooth
surfaces for engineering
purposes. \textit{ "The Gauss-Codazzi equations (Gauss' theorem and the
Codazzi equations) are compatibility equations, which
ensure that the coefficients of the first and second fundamental
forms are related in such a way that the surface
'fits together'."} 




In Green and Zerna you can read the following defintion of the Codazzi
equations:
\begin{equation}
    b_{\alpha 1}|_2 = b_{\alpha 2}|_1 
\end{equation}

In Struik we can read them as:

\begin{equation}
   b_{11},_2 - b_{12},_1 = b_{11} \Gamma^1_{12} + b_{12}(\Gamma^2_{12} - \Gamma^1_{11}) - b_{22}\Gamma^2_{11} 
\end{equation}

\begin{equation}
   b_{12},_2 - b_{22},_1 = b_{11} \Gamma^1_{22} + b_{12}(\Gamma^2_{22} - \Gamma^1_{12}) - b_{22}\Gamma^2_{12} 
\end{equation}


\begin{equation}\label{Gauss}
  K= \frac{b_{11}b_{22}-b^2_{12}}{a}
\end{equation}

\begin{equation}
  K= \frac{1}{4}\epsilon^{\lambda \alpha} \epsilon^{\beta \gamma} \bar{R}_{\lambda \alpha \beta \gamma}
\end{equation}

Where Green and Zerna calls $\bar{R}_{\lambda \alpha \beta \gamma}$ the  \textit{associated Riemann-Christoffel tensor} which is defined as.

\begin{equation}
 \bar{R}_{\lambda \alpha \beta \gamma} = a_{\lambda \mu} \bar{R}^\mu_{.\alpha \beta \gamma}
\end{equation}

 Where $\bar{R}^\mu_{.\alpha \beta \gamma}$ which is called the \textit{Riemann-Christoffel tensor} can be written in Christoffel Symbols.
\begin{equation} \label{Gauss2}
\bar{R}^\lambda_{.\alpha \beta \gamma} = \Gamma^3_{\alpha \beta} \Gamma^\lambda_{3\gamma}-\Gamma^3_{\alpha \gamma}\Gamma^\lambda_{3\beta} 
\end{equation}

Equation \ref{Gauss2} shows what \ref{Gauss} can be written in terms of the first fundamental form, since Christoffel symbols can be written in the first fundamental form components.


\subsubsection{Principal Curvature}

The directions in the tangent plane for which $\kappa_n$ takes maximum takes maximum and minumum values are called principal directions.There are always two principal curvatures $\kappa_1$ and $\kappa_2$ and the directions are always orthogonal to each other.  Struik

The principal curvatures are the roots of the equation
\begin{equation}
  \begin{vmatrix} 
b_{11} - \kappa a_{11} & b_{12} - \kappa a_{12} \\ 
b_{12} - \kappa a_{12} & b_{22} - \kappa a_{22}
\end{vmatrix}
=0
\end{equation}

and the principal vectors corresponding to the principal curvature $\kappa$ are the tangent vectors $\textbf{t} = \xi \textbf{a}_1 + \eta \textbf{a}_2$

\begin{equation}
\begin{pmatrix} 
b_{11} - \kappa a_{11} & b_{12} - \kappa a_{12} \\ 
b_{12} - \kappa a_{12} & b_{22} - \kappa a_{22}
\end{pmatrix}
\begin{pmatrix}
\xi \\
\eta
\end{pmatrix}
=
\begin{pmatrix}
0 \\
0
\end{pmatrix}
\end{equation}


\begin{equation}
\kappa_n = \kappa_1cos^2(\phi) + \kappa_2sin^2(\phi) 
\end{equation}

\begin{figure}[H]
\centering
\includegraphics[width = 0.6\linewidth ]{figure/Theory/principalCurvature2.pdf}
\caption{Scan better picture from Pottman\cite{ref:ArchGeometry} }
\end{figure}



\begin{figure}[H]
\centering
\includegraphics[width = 0.9\linewidth ]{figure/Theory/principalCurvature.pdf}
\caption{Scan better picture from Pottman \cite{ref:ArchGeometry}}
\end{figure}


\subsubsection{Gaussian and Mean Curvature}

Two measures to describe the curveature of a surface are what is called Gaussian and Mean Curvature. It can be described in the forms of the principal curvature. Both can though be written in terms of first and second fundamental form as well.

The mean curvature, $H$, is the mean curvature of the principal curvature
\begin{equation}
H = \frac{\kappa_1 + \kappa_2}{2} =\frac{b_{11}b_{22} - 2b_{12}a_{12} + b_{22}a_{11}}{2(a_{11}a_{22} - (a_{12})^2)}
\end{equation}

The Gaussian curvature, K, is the product of the two
principal curvatures.

\begin{equation}
K = {\kappa_1 \kappa_2} = \frac{b_{11} b_{22} - (b_{12})^2}{a_{11}a_{22} - (a_{12})^2}
\end{equation}

The geometrical meaning of the Gaussian curvature can be seen in below.  A point of positive Gaussian curvature is a point where you have positive principal curvature in both directions as in a sphere. This is a point where you have two parabolas who's openings are directed the same way. A negative Gaussian curvature means that you have two parabolas but where they are directed in opposite directions. Zero Gaussian curvature is a result of one or both Principal curvatures are zero as in a cylinder.

\begin{figure}[H] 
\centering
\includegraphics[width=1\linewidth ]{figure/Theory/GaussForms.pdf}
\caption{pottman}
\end{figure}

Surfaces of no Mean curvature is what we are calling minimal surfaces. Usually we define that as a surface of the smallest area spanned by a given closed space curve, even though this is not always true according to Struik. 
A minimal surface can be produced physically by using soap film and was experimented by Frei Otto. These experiments have quite similar properties as his works in architecture. 

\begin{figure}[H] 
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/SoapSreeen.jpg}
\caption{Screenshoot from a movie of Frei Ottos \cite{ref:FreiOttoSoap}}
\end{figure}


\begin{figure}[H] 
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/FreiOtto.jpg}
\caption{Screenshoot from a movie of Frei Ottos}
\end{figure}



\subsection{Curves on Surfaces}

So far we have covered the properties of surfaces and curves somewhat separately. The properties of curves on surfaces differs, or how we describe them, a bit from the curves in  space. It is possible to relate the properties of the curve to the surface geometry, for instance you have a normal in every point of the curve. The most famous curve on the surface might for instance be the geodesic.

\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth ]{figure/Theory/CurveOnSurface.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}



\subsubsection{Geodesics} \label{sec:geodesics}

The most common description a geodesic curve is the shortest path between two points on a surface. More interesting might be to think of the experience of moving along a geodesic on the surface. Presley describes it as even the curve does not in fact look straight the notion is that we are progressing in a straight direction, i.e we do not need to turn to keep ourselves on the curve. 


\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth ]{figure/Theory/Geodesics.pdf}
\caption{An ant moving on the surface in what it senses as a straight line is called a geodesic }
\end{figure}

To visualize this on a physical surface one can  mount a straight paper strip upon the surface, without wrinkling the paper. \textit{A straight piece of paper laid over a smooth surface will follow a geodesic on the surface"} \cite{ref:ArchGeometry}. This is visualised in the figures below where the ribbons are geodesics on the surface.

\begin{figure}[H]
\centering
\includegraphics[height=0.35\linewidth ]{figure/Theory/geo1.JPG}
\includegraphics[height=0.35\linewidth ]{figure/Theory/geo2.JPG}
\caption{Straight ribbons laid out flat on a surface will follow the geodesics on that surface.\cite{ref:ArchGeometry} }
\label{fig:ribbon}
\end{figure}



So you can think of a geodesic as a shortest path between A and B but you can also say that standing in A there is a geodesic in every direction.\\
"\textit{Through every point of the surface passes a geodesic in every direction. A geodesic is uniquely determined by an initial point and tangent at that point}"´\cite{ref:Struik} 
To describe this in a mathematical way you would say that the geodesic curvature is zero in every point on the curve. The curvature of the curve can be devided into two parts where the geodesic part is the component that does not lie in the plane spanned by the tangent and the normal to the surface, see figure \ref{fig:GeoCurvature}. 

The properties of the geodesic can be very useful in the field fabricating forms. The geodesics can for instance be used as the cutting patterns for tensile structures \cite{ref:Williams2}. It can also be useful for wooden lattice or gridshell structures, \textit{"...the manufacturing of laminated beams, which are much easier to
make if the individual boards can simply be twisted and bent along the weak axis."}\cite{ref:Pottman}. It follows the same principle as the ribbons in the figure \ref{fig:ribbon}.


\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/Denver.jpg}
\caption{Airport of Denver with a membrane structure. You can see the cutting patterns of the structure. }
\end{figure}

This chapter is dedicated for classical differential geometry of smooth surfaces. It can be worth to make an exception to point out the relations for shortest paths, or a geodesic representation, on discrete surfaces. In the picture below is a polyhedron that is built up by different elements. The transitions between these surface patches are not smooth since the their exists no normal at these boundaries. It is therefore not possible to apply the above theory. There is though possible to determine a shortest path for a line that crosses discrete surfaces. When the line crosses the  boundary the angle on each side should be the same \cite{ref:ArchGeometry}, see figure below.

\begin{figure}[H]
\centering
\includegraphics[width=0.35\linewidth ]{figure/Theory/shortpath.pdf}
\includegraphics[width=0.35\linewidth ]{figure/Theory/shortpath2.pdf}
\caption{\cite{ref:ArchGeometry} }
\end{figure}


\subsubsection{Normal and Geodesic Curvatures}

In the section \ref{curvature} the curvature is defined as following for a unit speed curve,
$\textit{d\textbf{t}}/ds = \kappa \textbf{n}$. This is of course true also even if the curve lies on a surface. It is though possible to discreisize the curvature into two parts, \textit{geodesic curvature}, $\kappa_g$, and \textit{normal curvature},$\kappa_n$, and reference it to the framework and properties of the surface. This gives a better understanding of how the curvature relates to the surface since the principal normal vector for space curves might be hard to anticipate. In the figure \ref{fig:GeoCurvature} it is possible to get an idea of how geodesic curvature and normal curvature behaves on the surface.
\begin{equation}
\kappa \textbf{n} = \kappa_n \textbf{a}_3 + \kappa_g\textbf{a}_3 \times \textbf{t}
\end{equation}

\begin{equation}
\kappa_n = d^2\textbf{c}/ds^2 \cdot \textbf{a}_3,\quad \kappa_g = d^2\textbf{c}/ds^2 \cdot(\textbf{a}_3 \times \textbf{t})
\end{equation}


\begin{figure}[H]
\centering
\includegraphics[height=0.6\linewidth ]{figure/Theory/SFF.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\label{fig:GeoCurvature}
\end{figure}

One example that is importance is when the geodesic curvature is zero and the curvature is only based on the normal curvature. Those curves that fulfills those requirements are called geodesics and can be read more in detail in \ref{sec:geodesics}.

\subsection{Curve Linear Coordinates On The Surface}

Curve linear coordinates can be illustrated as coordinate lines on the surface where the parameters $\theta^1$ and $\theta^2$ are constant. Coordinate can be said to form a net on the surface.
Previously it has been assumed that the curve linear coordinate system has been the most basic that is of curves of constant values of parameters $\theta^1,\theta^2$. It is though possible to change the parameters as of:
\begin{equation}
\bar{\theta^1} = \phi(\theta^1,\theta^2),\quad \bar{\theta^2} = \phi(\theta^1,\theta^2)
\end{equation}

This means that we can apply different kinds of curve linear coordinate systems which can be really useful. In the future we shall only use $\theta^1$ and $\theta^2$ describing the parameters whatever coordinate parameters used.

\subsubsection{Geodesic Coordinates}\label{sec:geoCord}

The geodesic coordinates is based on two different sets of coordinates curve that forms what is called a geodesic set. The first set of curves are geodesics and the other set are curves that intersect the geodesics at an right angle, and is therefore called orthogonal trajectories to the geodesics. The parametric curves are choosen as $\theta^2 = constant$ and the orthogonal trajectories as $\theta^1 =constant$ \cite{ref:Williams}, see figure \ref{fig:geoCord}. \\

 Struik\cite{ref:Struik} states that \textit{"Equation \ref{geodesicForm} is called the 'geodesic form' of the line element and ($\theta^1,\theta^2$) form a set of 'geodesic coordinates'; or, for short, 'geodesic set'.On every surface we can find an infinite number of geodesic sets, depending on an arbeitrary curve $C_0$, along which the curves $\theta^2$ = constant can still be spaced in an arbitrary way."}\\

\begin{figure}[H]
\centering
\includegraphics[height=0.8\linewidth ]{figure/Theory/geodesicCoordRe.pdf}
\caption{Redrawn picture from \cite{ref:Struik}  }
\label{fig:geodesicCoord}
\end{figure}


\begin{equation}\label{geodesicForm}
    ds^2 = (d\theta^1)^2 + a_{22}(\theta^1,\theta^2)(d\theta^2)^2
\end{equation}

The geodesic form states that $a_{11} = 1$ and $a_{12}=a_{21} = 0$. This means that $\textbf{a}_1$ and $\textbf{a}_2$ are perpendicular everywhere on the surface since $\textbf{a}_1 \cdot \textbf{a}_2 = 0$ . 
Struik also states that the segments  on all geodesics included  between any to two orthogonal  trajectories are equal.
\textit{ If geodesics be drawn orthogonal to a curve C, and segments of equal length be measured upon them from C, then the locus of their end points is an orthogonal trajectory of the geodesics.} This means that it should be quite easy to construct, or at least find the intersection points of, an orthogonal trajectory if there already exist a set of geodesics and at least on orthogonal trajectory. The picture below presents the idea graphically.

\begin{figure}[H]
\centering
\includegraphics[width=1.0\linewidth ]{figure/Theory/geoDesicCoord2.pdf}
\caption{redrawn from \cite{ref:Struik}   }
\label{fig:geoCord}
\end{figure}

The proof of the geodesic form is done by both Stoker \cite{ref:Stoker} and Williams \cite{ref:Williams} and can be read in detail. A special case of geodesic coordinates is \textit{Polar geodesic coordinates}. The polar geodesic set is based on that the geodesics has their starting point in a point O,see figure \ref{fig:polargeo}, they become a radial set of curves. The orthogonal trajectories becomes a set of curves in the angular direction that cuts the geodesics at an right angle. 

\begin{figure}[H]
\centering
\includegraphics[width=0.7\linewidth ]{figure/Theory/polarGeo.pdf}
\caption{Polar geodeisc coordinate redrawn from \cite{ref:Struik} }
\label{fig:polargeo}
\end{figure}

The properties of the geodesic coordinates makes it interesting and useful for brick structures. The most important for brick patterns is that the height of the brick is made consistent everywhere. The nature that the orthogonal trajectories intersect the geodesic leaving equal length curves ensures this requirement. 

\begin{figure}[H]
\centering
\includegraphics[height=0.8\linewidth ]{figure/Theory/GeodesicBrick.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}



\subsubsection{Equal Mesh Net Coordinates}

For a defined surface it is possible to apply an equal mesh net. They do not necessarily consist of squares but most likely of mostly rhombus. The constraint for this is that the angle is allowed to change to consist the equal lengths. This is describe in detail by Willams in his papper from 1980 and in the book shell Struc...\\
If the $a_{11} = a_{22} = L^2 = constant$ and $a_{12} = L^2\quad cos\alpha$ where $\alpha$ is the angle between the members.\\

\begin{figure}[H]
\centering
\includegraphics[width=0.6\linewidth ]{figure/Theory/equalMeshFrei.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

This is a powerful concept working on for instance lattice structures such as gridshells where you can assign a constant length to the members.




\section{Form finding algorithms}

The main concepts of form finding and under what circumstances it can be used is described in section \ref{sec:findingform}. This chapter will get into detail in how these equilibrium equations and the solving procedure.

\subsection{Force Density}

The force density was used already on structures such as the Mannheim Multihall in 1974 and is also known as the "Stuttgart direct approach". A key concept in Force density method is obviously force densities.

$$ Force \enskip Density, q, = \frac{Force\enskip in \enskip bar}{stressed\enskip length\enskip of\enskip bar}$$

\begin{figure}[H]
\centering
\includegraphics[width=0.45\linewidth ]{figure/Theory/NodeEqFD.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

The equilibrium for the x-direction can be described as following.

\begin{equation}
\frac{(x_j - x_i)}{l_j}F_j +\frac{(x_k - x_i)}{l_k}F_k+ \frac{(x_l - x_i)}{l_l}F_l + p_x = 0
\end{equation}

It is now possible to apply the defintion of the force densities $q_i = F_i/l_i$, for $i = 1,2,3$.

\begin{equation}
(x_j - x_i)q_j +(x_k - x_i)q_k + (x_l - x_i)q_l  + p_x = 0
\end{equation}
The \textbf{C} matrix describes the toplogy of the system. Using the methology of Linkwitz it should be $[3\times 4]$ matrix for the system above. The condition for the components are described below.

\begin{equation}
C_{ij} = \Bigg\{ \begin{matrix} 
+1\enskip if\enskip branch\enskip j\enskip ends\enskip in\enskip node\enskip i \\ 
-1\enskip if\enskip branch\enskip j\enskip begins\enskip in\enskip node\enskip i \\ 
0 \enskip otherwise  
\end{matrix}
\end{equation}

The equilibrium equation can then be written in matrix form. \textbf{Q} is a diagonal matrix with the force densities and \textbf{x} is a position vector for the nodes, $[1\times 4]$ and \textbf{p} is also vector containg the loads. 

\begin{equation}
 \textbf{C}^T_N\textbf{Q}\textbf{C}\textbf{x} + \textbf{p} = \textbf{0}
\end{equation}

Linkwitz rewrites the equation to get it to the standard form for linear equations $\textbf{Ax=b}$

\begin{equation}
 \textbf{Dx} + \textbf{p} = \textbf{0}
\end{equation}

\begin{equation}
\textbf{D}_N = \textbf{C}^T_N\textbf{Q}\textbf{C}_N,\quad \textbf{D}_F = \textbf{C}^T_N\textbf{Q}\textbf{C}_F 
\end{equation}

The node positions of the free nodes can be solved in the same manor in a standard manor for linear equations on matrix form.

\begin{align*} 
   \textbf{x}_N = \textbf{D}_N^{-1}(\textbf{p}_x - \textbf{D}_F\textbf{x}_F) \\ 
   \textbf{y}_N = \textbf{D}_N^{-1}(\textbf{p}_y - \textbf{D}_F\textbf{y}_F) \\ 
   \textbf{z}_N = \textbf{D}_N^{-1}(\textbf{p}_z - \textbf{D}_F\textbf{z}_F) 
\end{align*}

For a computer program the process could be described in the following stages.

\begin{figure}[H]
\centering
\includegraphics[width=0.6\linewidth ]{figure/Theory/FDScheme2.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}


\subsection{Thrust Network Analysis} \label{sec:TNA}

The Thrust Network analysis was developed by Phillipe Block during his Phd. at MIT for design and analysis of  3 dimensional unreinforced masonry structures. It can be seen as an extension of the FDM for masonry structures and is placed under the branch \textit{Geometric Stiffnes Methods}. Main concepts of TNA could be described as the separation of horizontal of vertical equilibrium and the possibility to work with different equilibrium solutions through the principles of graphic statics. Block describes three different domains, the form diagram, $\Gamma$, in $\mathbb{R}^2$  , the reciprocal form diagram, $\Gamma^*$, in $\mathbb{R}^2$,  and the solution network $G$, in $\mathbb{R}^3$.

\begin{figure}[H]
\centering
\includegraphics[width=1.0\linewidth ]{figure/Theory/TNA.jpg}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

Key concepts

\begin{enumerate}
\item \textit{Parallel Loads} - This meaning that if a set of vectors is in equilibrium in space then their projection along any direction onto a plane will also be in equilibrium. This is proven by Green in Zerna in section \ref{sec:planeCoord} that we always project and formulate our problem in plane coordinates.
\item \textit{Indeterminate networks} - In statically indeterminate structures or systems there are several possibilities of equilibrium solutions. Block introduces a scale factor that enables to adjust the horizontal components of the reciprocal force diagram.     

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/TNAKey2.JPG}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

\end{enumerate}


In the Phd. Block states that TNA is based on the following assumptions which to some extent are similar to the assumptions of Heyman for design of masonry structures in section..

\begin{enumerate}
\item The structural action of the vault is represented by a discrete network of forces with discrete loads applied at the vertices. 
\item A compression-only solution in equilibrium with the applied loads and contained within the vault’s geometry represents a valid, i.e. stable, equilibrium state of the vault.
\item Masonry has no tensile capacity; sliding does not occur; and the stresses are low enough so that crushing does not occur. 
\item All loads need to be vertical.
\end{enumerate}

The last assumption is a big difference and limitation compared to FDM, and other form-finding algorithms.


The equilibrium equations for TNA are,as mentioned, divided into  horizontal and vertical equilibrium conditions. 

\begin{equation}
    F_{H,ji} + F_{H,ki}+ F_{H,li}  =0 
\end{equation}
\begin{equation} \label{eq:vertTNA}
    F_{V,ji} + F_{V,ki}+ F_{V,li} = P_i
\end{equation}


\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/NodeEqTNA.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

As the second key concept tells it is possible to describe the vertical equilibrium in plane forces. Therefore the equation \ref{eq:vertTNA} can written as a function of the horizontal components $F_{H,ij}$  




\begin{equation}
    F_{H,ij}\frac{z_i-z_j}{l_{H,ij}} +F_{H,ik}\frac{z_i-z_k}{l_{H,ik}}+F_{H,il}\frac{z_i-z_l}{l_{H,il}} = P_i
\end{equation}


\begin{equation}
    F_{H,ij} =\frac{1}{r}{l^*_{H,ij}}
\end{equation}

\begin{equation}
    \textbf{q}=\frac{1}{r}\textbf{L}^{-1}_H\textbf{l}^*_{H}
\end{equation}

\begin{equation}
    \textbf{C}^T_N(\textbf{L}^{-1}_H\textbf{L}^*_H)\textbf{C}\textbf{z}- r\textbf{p} = \textbf{0}
\end{equation}

\begin{equation}
    \textbf{z}_N = \textbf{D}^{-1}_N(\textbf{p}r-\textbf{D}_F\textbf{z}_F)
\end{equation}


\begin{figure}[H]
\centering
\includegraphics[width=0.5\linewidth ]{figure/Theory/TNAScheme.pdf}
\caption{Computational diagram for Thrust network analysis, redrawn from \cite{ref:ShellOpt} }
\end{figure}

\subsection{Dynamic Relaxation}\label{DR}

The main concept of dynamics is based on Newtons second law of motion, which means that the sum of all forces in the system is equal to the mass times acceleration.In statical problems it is always assumed  This means that the equilibrium equation can result in a residual force that can be translated into a motion.

\begin{equation}
\sum F = ma
\end{equation}

Applying newtons second law it is possible to derive the equation of motion, \ref{eq:motion}, which is a second order differential equation and is the core of structural dynamics. \cite{ref:Dynamics}.

\begin{equation} \label{eq:motion}
 m\ddot{u}(t) + c\dot{u}(t) + ku(t) = p(t)
\end{equation}


$u(t)$ is the displacement parametrised by the time, $t$, and $\dot{u},\ddot{u}$ is first and second differentiation of $u$ with respect to time, $t$, $c$ refers to damping and $p(t)$ is the applied loading. The equation \ref{eq:motion} is referring to a single degree of freedom system that can be solved analytically. For large and complex systems this might not be possible and a numerical procedure must be applied. Dynamic relaxation is one of these types of numerical procedures and the basic concept can be described as,\textit{"The basis of the method is to trace the step by step for small time increments,$\Delta t$,the motion of each interconnected node of the grid until the structure comes to rest in static equilibrium."} \cite{ref:ShellOpt}


\begin{figure}[H] 
\centering
\includegraphics[width=0.8\linewidth ]{figure/Theory/PartSpring.jpg}
\caption{Different stages of a dynamic equilibrium model }
\label{fig:DR}
\end{figure}

A typical flow diagram of dynamic relaxation can look like this. It is a modified version of one from Shell structures for architecture. That one is made for modelling a grid-shell so this one is a bit more general:

\begin{figure}[H]
\centering
\includegraphics[height=1.2\linewidth ]{figure/Theory/DRScheme.pdf}
\caption{Flow diagram for Dynamic Relaxation, redrawn from \cite{ref:ShellOpt} }
\end{figure}

It has been commonly used in engineering to find forms of equilibrium for membrane and shell structures. For the former the DR formulation is very dependent of the internal forces and the pretension its elements or boundaries. Shells on the other hand is very dependent of the external loads and has a dominant gravity force applied.Though you can really model any kind of loading as long it imposes a force on the nodes or particles. In the thesis of 

\subsubsection{Combined form-finding and cutting patterns of tensile structures}

Form finding a fabric structure with a soap film or minimal surface is done by setting the membrane stress components:

\begin{equation}
    n^{\alpha \beta} = Ta^{\alpha \beta}
\end{equation}

$T$ is the surface tension and $a^{\alpha \beta}$ is the metric tensor. In addition a geodesic coordinate system for generating the cutting pattern is obtained by imposing the conditions $a^{12} = 0$ and  $a^{22} = constant$


\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/EqualMeshGeo.pdf}
\caption{Flow diagram for Dynamic Relaxation }
\end{figure}


\begin{figure}[H]
\centering
\includegraphics[width=1.0\linewidth ]{figure/Theory/SoapbubbleElement.pdf}
\caption{Flow diagram for Dynamic Relaxation }
\end{figure}

\section{Discrete formulations}
\subsection{Discrete Differential Geometry}

In the previous chapter Classical Differential Geometry was presented, which implies that the surfaces are smooth and regular. The field of Discrete Differential Geometry(DDG) does not work with smooth surfaces, i.e you have a continuous function of the normal of the surface in each point, but with discretized into elements in what is called a polygon mesh. A polygon mesh consists of faces, edges and vertices's. The faces are usually triangles or quadrilaterals. Below one can see a surface that  is discretized into a mesh representation with quadrilaterals.


\begin{figure}[H]
\centering
\includegraphics[width=0.6\linewidth ]{figure/Theory/polygonMesh.jpeg}
\caption{A surface, or solid, is discretized into a course and finer mesh representation}
\end{figure}

One can say that DDG is a merged concept of the fields of CDG and Discrete Geometry, where DDG imitates the concepts of CDG in a discrete environment.
\textit{ Whereas classical differential
geometry investigates smooth geometric shapes (such as surfaces), and
discrete geometry studies geometric shapes with finite number of elements
(such as polyhedra), the discrete differential geometry aims at the development
of discrete equivalents of notions and methods of smooth surface
theory.} \cite{ref:discrete}

An interesting example for the thesis is the DDG equivalent to a geodesic, or shortest path,  where the CDG states that the geodesic curvature should be zero in all points for curve to be a geodesic. To determine a geodesic equivalent in DDG one say that the line should intersect the edges of the mesh faces at a similar angle on both sides\cite{ref:ArchGeometry}, see figure below.

\begin{figure}[H]
\centering
\includegraphics[width=0.35\linewidth ]{figure/Theory/shortpath.pdf}
\includegraphics[width=0.35\linewidth ]{figure/Theory/shortpath2.pdf}
\caption{\cite{ref:ArchGeometry} }
\end{figure}

\subsection{Correlation between continuous and discrete}

There are two parts of equivalent. One is a equivalent definition of the concept and as above, and one thing is if you can say that it is equivalent for your continuous case, if this polyhedra above was a discrete representeation of a smooth surface. This has to do with the properties of geometry and the mesh-fineness. What one could say that for a certain size of the faces this equal enough smooth surface equivalent. 

\begin{figure}[H]
\centering
\includegraphics[width=1.0\linewidth ]{figure/Theory/polysphere.pdf}
\caption{ }
\end{figure}

This kind of reasoning should not be unfamiliar for structural engineers since it is the same logic as Finite Element Method. And there are many other examples such that brick structures is a discrete representation of surface, dynamic relaxation is also a discrete solving procedure of dynamic problems and so on. 

\section{Shell Theory}




\subsection{Curved beams}

Before heading into the membrane theory of shells we can look at an curved beam element. If applying the load in the radial,$p_r$ and angular direction,$p_\theta$,in force per unit length, it is possible to formulate an expression for the radii to avoid shear forces and bending moments. The force in the axial direction in this case is,$N$. The arch length is defined as $\delta s = r(\theta)\Delta\theta $

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/CurvedBeam3.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

For an inifitely small segment it is possible to derive the following equilibrium equations.

\begin{equation}
N = p_r r,\quad \frac{1}{r} \frac{dN}{d\theta} = \frac{dN}{ds} = - p_\theta
\end{equation}

For an known loading it is possible to solve the axial force and the radii of that arch. Since the relation between the radial and angular loading will change when the angle change, under dead load in the gravitational direction, the expression for the radii will change, and therefore not circular. 

\subsection{General Theory of Membrane Shells}


Shells, in which bending moments can be neglected are called membrane
shells. Membrane theory assumes the following things:

\begin{enumerate}
\item The material of the shell is isotropic and obeys Hooke's law.
\item The thickness of the shell (and the bending moments) can be neglected.
\item The state of stress of the shell is fully described by the membrane
forces acting in the mean surface.
\item Supports along the boundary are tangent to the mean surface.
\item Deformations due to membrane forces are not hindered by boundary
conditions.
\end{enumerate}

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/membraneDefinition.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}


Equilibrium: 
\begin{equation}
\frac{\partial}{\partial \theta^1}(n^{1 \beta}\textbf{a}_{\beta} \sqrt{a}) d\theta^2 d\theta^1 + \frac{\partial}{\partial \theta^2}(n^{2 \beta}\textbf{a}_{\beta} \sqrt{a}) d\theta^1 d\theta^2 + ( p^{\alpha}\textbf{a}_\alpha + p\textbf{a}_3)\sqrt{a} d\theta^1 d\theta^2  = 0
\end{equation}



\begin{equation} \label{membraneEq}
\therefore  \frac{\partial}{\partial \theta^ \alpha} (n^{\alpha \beta} \textbf{a}_\beta \sqrt{ a}) + ( p^{\alpha}\textbf{a}_\alpha + p\textbf{a}_3)\sqrt{a} = 0
\end{equation}

Vector 3 equations

From \ref{membraneEq}

\begin{equation}
n^{\alpha \beta}_{,\alpha} \textbf{a}_\beta + n^{\alpha \beta}\textbf{a}_{\beta,\alpha} + n^{\alpha \beta}\textbf{a}_\beta \Gamma^\lambda_{\lambda \alpha} + (p^\beta \textbf{a}_\beta + p\textbf{a}_3) = 0
\end{equation}

Coefficients of $\textbf{a}_\beta$,  2 equations.
\begin{equation}
(n^{\alpha \beta}_{,\alpha} + n^{\alpha \beta}\Gamma^\beta_{\lambda \alpha} + n^{\alpha \beta}\Gamma^\lambda_{\lambda \alpha} + p^\beta) \textbf{a}_\beta = 0 
\end{equation}

Coefficients of $\textbf{a}_3$,  1 equation.
\begin{equation}
(n^{\alpha \beta} b_{\alpha \beta} + p)\textbf{a}_3 = 0
\end{equation}

The shell is subjected to external loads which is denoted by $\textbf{p}$ and is measured per unit area of the middle surface.

\begin{equation}
\textbf{p} = p^{\alpha}\textbf{a}_\alpha +p\textbf{a}_3
\end{equation}


Equilibrium equations:
\begin{equation}
n^{\alpha \beta}b_{\alpha \beta} + p = 0
\end{equation}
\begin{equation}
n^{\alpha \beta}|_\alpha + p^\beta = 0
\end{equation}

Where $n^{\alpha \beta}|_\alpha$ is the covariant differentiation. 

\begin{equation}
n^{\alpha \beta}|_\alpha = n^{\alpha \beta}_{,a} + \Gamma^\beta_{\alpha \rho} n^{\alpha \rho} + \Gamma^\alpha_{\alpha \rho} n^{\rho \beta}
\end{equation}


\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/equlibriumMem.pdf}
\caption{The tangent differs depending of which direction you refer to. }
\end{figure}

\subsection{Membrane Theory In Plane Coordinates} \label{sec:planeCoord}
It is sometimes useful to have the membrane theory expressed in a base plane $\Pi$. This is for instance a vital part of the \textit{Thrust network analysis} method presented in \textit{Philippe Blocks} Phd.

"We consider a net of coordinate curves on the middle surface M and we form a parallel projection on this net on to a plane $\Pi$. The direction of the projection is given by the unit vector $\textbf{e}_3$ which is perpendicular to $\Pi$ and measured from $\Pi$ to $M$. We now have a net od coordinate curves on $\Pi$ which corresponds to the net of $M$ and we assume that correspondence is one-one. The distance between two corresponding points of  $M$ and $\Pi$ is measured in the direction of $\textbf{e}_3$ is denoted by $z(\theta^1, \theta^2)$ which is a function of $\theta^1,\theta^2$ and us a surface invariant.Taking the \textbf{r} for the position vector of $M$, and $\hat{\textbf{r}}$ for the position vector of the corresponding point of $\Pi$, we have $\textbf{r} = \hat{\textbf{r}} + z \textbf{e}_3$."

\begin{figure}[H]
\centering
\includegraphics[width=0.9\linewidth ]{figure/Theory/planeShell.pdf}
\caption{Drawn from Zerna }
\end{figure}


\begin{equation}\label{memEq}
\epsilon^{\alpha \gamma}\epsilon^{\beta \rho} z|_{\alpha \beta}\phi|_{\gamma \rho} = q
\end{equation}
Where q contains the loading acting on the shell. 
\begin{equation}
q = z|_{\alpha \beta}A^{\alpha \beta} - s + s^\alpha z |_\alpha
\end{equation}

If writing out these equation \ref{memEq} we get 16 equations since we have four summation indices. Zerna define the components of the  psuedo-Tensor as $\epsilon^{11} = \epsilon^{22}=\epsilon_{11}=\epsilon_{22} = 0,\quad \epsilon^{12} = -\epsilon^{21} = \sqrt{a},\quad \epsilon_{12} = -\epsilon_{21} = \frac{1}{\sqrt{a}},$ It is possible to reduce it to:

\begin{equation}
    \epsilon^{21}\epsilon^{21}z,_{22}\phi_{11} + 2\epsilon^{12}\epsilon^{21}z,_{12}\phi_{12} + \epsilon^{12}\epsilon^{12}z,_{11}\phi_{22} = q
\end{equation}

If we choose a rectangular Cartesian coordinate system we can simplify the expression to:

\begin{equation}
    z,_{22}\phi_{11} -2 z,_{12}\phi_{12} + z,_{11}\phi_{22} = q
\end{equation}

This is the equation you can read in books the famous book \textit{Theory of Plates and Shells} by Timoshenko and Woinowsky-Krieger for membrane stresses in shells. They use and \textit{F} instead of $\phi$ for stress functions.



\section{Compatibility of Differential geometry and Membrane theory}

In the paper Air supported structure the state of art Williams present a technique to combine form finding with the generation of cutting patterns for tensile structures, i.e finding shapes of equilibrium that applies geodesic coordinates where one of the set curves are geodesics. 
Assuming we have know loadings of the membrane we have 9 components that are unknown:

\[ 
\left \{
  \begin{tabular}{ccc}
  $a_{11}$  & $a_{12} =a_{21} $ & $a_{22}$ \\
 $b_{11}$  & $b_{12} =b_{21} $ & $b_{22}$\\
  $n_{11}$  & $n_{12} =n_{21} $ & $n_{22}$ 
  \end{tabular}
\right \}
\]

\vspace{5mm}
Obviously that means we need 9 equations to solve 9 unknown components. Gauss and Codazzi proved that the first and second fundamental form is indeed connected. Green and Zerna shows through the equilibrium connects the first and second fundamental form to the stress components. 
\vspace{5mm}

Three equations arise from the equilibrium equations.

$$n^{\alpha \beta}b_{\alpha \beta} + p = 0$$
$$n^{\alpha \beta}|_\alpha + p^\beta = 0$$

Three equations arise from equations of Gauss(Theorema egregium) and Codazzi.


$$ b_{11},_2 - b_{12},_1 = b_{11} \Gamma^1_{12} + b_{12}(\Gamma^2_{12} - \Gamma^1_{11}) - b_{22}\Gamma^2_{11} $$
$$   b_{12},_2 - b_{22},_1 = b_{11} \Gamma^1_{22} + b_{12}(\Gamma^2_{22} - \Gamma^1_{12}) - b_{22}\Gamma^2_{12} $$
$$  K= \frac{b_{11}b_{22}-b^2_{12}}{a}$$

That is in total 6 equations so it is still three unknown. It is possible to impose more known conditions than the loads alone. Two examples of these are
\vspace{5mm}
\begin{enumerate}
\item \textit{Geodesic coordinates}, $a_{22} = L^2 = const, a_{12}=0$
\begin{figure}[H]
\centering
\includegraphics[height=0.7\linewidth ]{figure/Theory/geodesicCoordRe.pdf}
\end{figure}
\item \textit{Equal mesh net coordinates}, $a_{11}= a_{22} = L^2, n_{12}=0$ 
\begin{figure}[H]
\centering
\includegraphics[height=0.4\linewidth ]{figure/Theory/equalMeshFrei.pdf}
\end{figure}
\end{enumerate}

